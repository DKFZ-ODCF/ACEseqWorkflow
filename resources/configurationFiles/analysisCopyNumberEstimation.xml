<!--
  ~ Copyright (c) 2017 The ACEseq workflow developers.
  ~
  ~ Distributed under the MIT License (license terms are at https://www.github.com/eilslabs/ACEseqWorkflow/LICENSE.txt).
  -->

<configuration name='copyNumberEstimationAnalysis' description='CNV Calling for NGS data.'
               configurationType='analysis' class='de.dkfz.roddy.core.Analysis' workflowClass='ACESeqWorkflow'
               runtimeServiceClass='de.dkfz.b080.co.common.BasicCOProjectsRuntimeService'
               imports="commonCOWorkflowsSettings"
               listOfUsedTools="mergeAndFilterSnpFiles,cnvSnpGeneration,annotateCnvFiles,phaseGenotypes,phaseGenotypes_X,addHaplotypesToSnpFile,getBreakpoints,mergeBreakpointsAndSv,getSegmentsAndSnps,markHomozygousDeletions"
               usedToolFolders="copyNumberEstimationWorkflow,tools">
    <configurationvalues>

        <!--BINARIES-->
        <cvalue name="HTSLIB_VERSION" value="1.9" type="string"/>
        <cvalue name="PERL_VERSION" value="5.20.2" type="string"/>
        <cvalue name="PYTHON_VERSION" value="2.7.9" type="string"/>
        <cvalue name="RSCRIPT_VERSION" value="3.3.1" type="string"/>
        <cvalue name='BEDTOOLS_VERSION' value='2.16.2' type='string'/>
        <cvalue name="VCFTOOLS_VERSION" value="0.1.10" type="string"/>
        <cvalue name="SAMTOOLS_VERSION" value="1.9" type="string"/>
        <cvalue name="BCFTOOLS_VERSION" value="1.9" type="string"/>
        <cvalue name="JAVA_VERSION" value="1.8.0_131" type="string"/> 

        <cvalue name='runInDebugMode' value='false' type='boolean' description='additional files will be produced to allow for easier debugging (true|false)'/>

        <!--ENVIRONMENT (see tools section below for possible values) -->
        <cvalue name="workflowEnvironmentScript" value="workflowEnvironment_tbiCluster" type="string"
                description="Use workflowEnvironment_conda for a generic Conda environment."/>
        <!--<cvalue name="workflowEnvironmentScript" value="${TOOL_WORKFLOW_ENVIRONMENT_TBI_PBS}" type="string"/>-->
        <cvalue name="condaEnvironmentName" value="ACEseqWorkflow" type="string"
                description="Name of the Conda environment on the execution hosts. Used by the environment setup script conda.sh defined as tool below."/>

        <!--outputMask-->
        <cvalue name='outputUMask' value='007' type='string'/>
        <cvalue name='outputFileGroup' value='B080'/>
        <cvalue name='outputAccessRights' value='u+rw,g+rw,o-rwx'/>
        <cvalue name='outputAccessRightsForDirectories' value='u+rwx,g+rwx,o-rwx'/>

        <cvalue name='possibleControlSampleNamePrefixes' value='( blood BLOOD normal control CONTROL buffy_coat GERMLINE )' type='bashArray'/>
        <cvalue name='possibleTumorSampleNamePrefixes' value='( tumor TUMOR metastasis xenograft disease DISEASE relapse RELAPSE autopsy AUTOPSY metastasis METASTASIS )' type='bashArray'/>
        <cvalue name='searchMergedBamWithSeparator' value='true' type='boolean' description='enforce complete sample name match (not just same prefix) (true|false)'/>


        <!-- Reference files -->
        <!-- sharedFilesBaseDirectory, inputBaseDirectory and outputBaseDirectory have to be set in the project.xml file -->
        <cvalue name="baseDirectoryReference" value="/icgc/ngs_share/assemblies/hg19_GRCh37_1000genomes" type="path"/>
        <cvalue name="referenceGenome_1KGRef" value="${baseDirectoryReference}/sequence/1KGRef/hs37d5.fa" type="path"/>
        <cvalue name='REFERENCE_GENOME' value="${referenceGenome_1KGRef}" type="string"/>
        <cvalue name="dbSNP_FILE" value="${baseDirectoryReference}/databases/dbSNP/dbSNP_135/00-All.SNV.vcf.gz" type="path"/>
        <cvalue name="MAPPABILITY_FILE" value="${baseDirectoryReference}/databases/UCSC/wgEncodeCrgMapabilityAlign100mer_chr.bedGraph.gz" type="path"/>
        <cvalue name="CHROMOSOME_LENGTH_FILE" value="${baseDirectoryReference}/stats/chrlengths.txt" type="path"/>
        <cvalue name="REPLICATION_TIME_FILE" value="${baseDirectoryReference}/databases/ENCODE/ReplicationTime_10cellines_mean_10KB.Rda" type="path"/>
        <cvalue name="GC_CONTENT_FILE" value="${baseDirectoryReference}/stats/hg19_GRch37_100genomes_gc_content_10kb.txt" type="path"/>
        <cvalue name='annotatePlotsWithGenes' value='false' type="boolean"/>

        <!-- Beagle references-->
        <cvalue name='BEAGLE_REFERENCE_FILE' value="${baseDirectoryReference}/tools_data/Beagle/chr${CHR_NAME}.1kg.phase3.v5a.b37.bref3" type="path"/>        
        <cvalue name='BEAGLE_REFERENCE_FILE_X' value="${baseDirectoryReference}/tools_data/Beagle/chrX.1kg.phase3.v5a.b37.bref3" type="path"/>        
        <cvalue name='BEAGLE_GENETIC_MAP' value="${baseDirectoryReference}/tools_data/genetic_maps/plink.chr${CHR_NAME}.GRCh37.map" type="path"/>
        <cvalue name='BEAGLE_GENETIC_MAP_X' value="${baseDirectoryReference}/tools_data/genetic_maps/plink.chrX.GRCh37.map" type="path"/>
        <cvalue name='BEAGLE_JAVA_OPTS' value='-Xmx9g' type="string" description="The memory request for Beagle"/>
        <cvalue name='BEAGLE_NUM_THREAD' value='3' type="integer" description="The number of thread request for Beagle"/>

        <!-- Input and output paths -->
        <cvalue name='outputExecutionDirectory' value='${outputAnalysisBaseDirectory}/exec_${executionTimeString}'/>
        <cvalue name='mergedBamSuffix' value='merged.mdup.bam' type="string" description="A list of all known suffixes for merged bam files. I.e. merged.dupmark.bam, merged.mdup.bam..."/>
        <cvalue name='mergedBamSuffixList' value='${mergedBamSuffix}' type="string" description="A list of all known suffixes for merged bam files. I.e. merged.dupmark.bam, merged.mdup.bam..."/>
        <cvalue name='defaultMergedBamSuffix' value='${mergedBamSuffix}' type="string" description="The default suffix for merged bam files when they are created by Roddy."/>

        <cvalue name='aceseqOutputDirectory' value='${outputAnalysisBaseDirectory}/ACEseq_${tumorSample}_vs_${controlSample}' type="path"/>
        <cvalue name='svOutputDirectory' value='${outputAnalysisBaseDirectory}/SOPHIA_${tumorSample}_${controlSample}' type="path"/>
        <cvalue name='crestOutputDirectory' value='${outputAnalysisBaseDirectory}/crest' type="path"/>
        <cvalue name='cnvSnpOutputDirectory' value='${aceseqOutputDirectory}/cnv_snp' type="path"/>
        <cvalue name='phasingOutputDirectory' value='${aceseqOutputDirectory}/phasing' type="path"/>
        <cvalue name='plotOutputDirectory' value='${aceseqOutputDirectory}/plots' type="path"/>


        <!-- ACEseq parameters-->
        <cvalue name='legacyMode' value='true' type='boolean' description="if true, ACEseq can cope with colname 'crest' instead of 'SV.Type'"/>

        <cvalue name='isNoControlWorkflow' value='false' type='boolean' description="use control for analysis (false|true)"/>
        <cvalue name='runWithFakeControl' value='false' type='boolean' description="use fake control for analysis (false|true)"/>
        <cvalue name='runQualityCheckOnly' value='false' type='boolean' description="Stop the workflow after the gc correction (false|true)"/>

        <cvalue name='CHR_NR' value='${CHR_PREFIX}${PARM_CHR_INDEX}${CHR_SUFFIX}' type="string"/>
        <cvalue name='CHR_NAME' value='${PARM_CHR_INDEX}' type="string"/>
        <cvalue name='CHROMOSOME_INDICES_OPTIMIZED_CNV_SNV_MPILEUP' value='( 2 1 3 5 4 6 8 12 7 11 10 9 X 16 13 15 14 18 17 19 20 22 21 Y )' type='bashArray'/>
        <cvalue name='AUTOSOME_INDICES' value='( {1..22} )' type='bashArray'/>

        <cvalue name='SV' value='true' type='string' description='include sophia SV breakpoints in analysis (true|false)'/>
        <cvalue name='allowMissingSVFile' value='false' type='string' description='allow that SV file is not available (true|false)'/>
        <cvalue name='runWithCrest' value='false' type='string' description='include crest SV breakpoints in analysis (true|false)'/>

        <cvalue name='runOnPancan' value='false' type='boolean'/>

        <cvalue name='libloc_PSCBS' value='' type='string' description="path to PSCBS library in R"/>
        <cvalue name='libloc_flexclust' value='' type='string' description="path to felxclust library in R"/>


        <!--cnv_snpMpileup Opts-->
        <cvalue name="mpileup_qual" value="0" type="integer" description="quality used for parameter 'Q' in samtools mpileup"/>
        <cvalue name='CNV_MPILEUP_OPTS' value='"-A --ignore-RG -B -Q ${mpileup_qual} -q 1 -I "' type="string" description="options for mpileup to determine which bases/reads to use"/>

        <!--addHaplotypes Opts-->
        <cvalue name="FILE_VCF_SUF" value="vcf" type="string" description="suffix for vcf files"/>
        <cvalue name="FILE_TXT_SUF" value="txt" type="string" description="suffix for txt files"/>
        <cvalue name='phasedGenotypesFilePrefix' value='phased_chr' type="string" description="prefix for phased genotypes file"/>
        <cvalue name='unphasedGenotypesFilePrefix' value='unphased_chr' type="string" description="prefix for unphased genotypes file"/>
        <cvalue name='phasedGenotypesFileSuffix' value='${FILE_VCF_SUF}' type="string" description="suffix for phased genotypes file"/>
        <cvalue name='unphasedGenotypesFileSuffix' value='${FILE_VCF_SUF}' type="string" description="suffix for unphased genotypes file"/>

        <!--phasing opts-->
        <cvalue name='BCFTOOLS_OPTS' value='"-vc "' type="string" description="bcftools options for imputation"/>
        <cvalue name="FILE_UNPHASED_PRE" value="${phasingOutputDirectory}/${unphasedGenotypesFilePrefix}" type="path"/>
        <cvalue name="FILE_PHASED_GENOTYPE" value="${phasingOutputDirectory}/phased_genotype_chr" type="path"/>
        <cvalue name="FILE_SAMPLE_G" value="${phasingOutputDirectory}/sample_g.txt" type="path" description="sample_g file used by imputation on X chromosome for females"/>
        <cvalue name="minHT" value="5" type="integer" description="minimum number of consecutive SNPs to be considered for haploblocks"/>

        <!--snvMergeFilter Opts-->
        <cvalue name='SNP_VCF_CNV_PATH' value='${cnvSnpOutputDirectory}/${pid}.chr' type="path" description="If the value is changed the value for the filename pattern MUST also be changed."/>
        <cvalue name='SNP_VCF_CNV_PATH_STR' value='${SNP_VCF_CNV_PATH}' type="string" description="This value must be converted to a string because of a bug."/>
        <cvalue name='SNP_SUFFIX' value='snp.tab.gz' type="string"/>
        <cvalue name='snp_min_coverage' value='5' type="integer"/>

        <cvalue name='MALE_FAKE_CONTROL_PRE' value="${baseDirectoryReference}/databases/LocalControls/ACEseq_GenericMaleControl/GenericMaleControl.chr" type='path'
                description="path and prefix to chromosome-wise 1kb coverage file used for fake control workflow for male patients" />
        <cvalue name='FEMALE_FAKE_CONTROL_PRE' value="${baseDirectoryReference}/databases/LocalControls/ACEseq_GenericFemaleControl/GenericFemaleControl.chr" type='path'
                description="path and prefix to chromosome-wise 1kb coverage file used for fake control workflow for female patients" />
        <cvalue name='FAKE_CONTROL_POST' value=".cnv.anno.tab.gz" type='string' description="suffix for chromosome wise 1kb coverage files used for fake control workflow"/>
        <cvalue name='PATIENTSEX' value="unknown" type='string' description="patient sex used in case of no control workflow (male|female|klinefelter)" />

        <!--annotateCnvFiles Opts-->
        <cvalue name='CNV_ANNO_SUFFIX' value='cnv.anno.tab.gz' type="string"
                description="suffix for mappability annotated chromosome-wise 1kb coverage files"/>
        <cvalue name='CNV_SUFFIX' value='cnv.tab.gz' type="string"
                description="suffix chromosome-wise 1kb coverage files"/>
        <cvalue name='min_X_ratio' value='0.8' type="float"
                description="minimum ratio for number of reads on chrY per base over number of reads per base over whole genome to be considered as female"/>
        <cvalue name='min_Y_ratio' value='0.12' type="float"
                description="minimum ratio for number of reads on chrY per base over number of reads per base over whole genome to be considered as male"/>

        <!--cnvMergeFilter Opts-->
        <cvalue name='cnv_min_coverage' value='5000' type="integer"
                description="minimum coverage for 1kb windows to be considered for merging in 10kb windows"/>
        <cvalue name='mapping_quality' value='1000' type="integer"
                description="minimum mapping quality for 1kb windows to be considered for merging in 10kb windows (maximum mappability)"/>
        <cvalue name='min_windows' value='5' type="integer"
                description="minimum number of 1kb windows fullfilling cnv_min_coverage and mapping_quality to obtain merged 10kb windows"/>

        <!--correctGC Opts-->
        <cvalue name='LOWESS_F' value='0.1' type="float" description="f parameter for R lowess function"/>
        <cvalue name='SCALE_FACTOR' value='0.9' type="float" description="scale_factor for R lowess function"/>
        <cvalue name='COVERAGEPLOT_YLIMS' value='4' type="float" description="ylims for Rplots in GC-bias plots"/>
        <cvalue name='FILENAME_GC_CORRECT_PLOT' value='${plotOutputDirectory}/${pid}_gc_corrected.png' type="path"
                description="gc-bias plot, before/during/after correction"/>
        <cvalue name='GC_bias_json_key' value='gc-bias' type="string" description="key in GC-bias json"/>

        <!--getBreakpointsAndMergeCrest/datatablePSCBSgaps Opts-->
        <cvalue name='FILE_DENSITYBETA' value='${aceseqOutputDirectory}/densityBeta.pdf' type="path"/>
        <cvalue name='min_DDI_length' value='1000' type="integer" description="minimum length for DEL/DUP/INV to be considered for breakpoint integration"/>
        <cvalue name='selSVColumn' value='eventScore' type="string" description="column from bedpe file to be recored in ${pid}_sv_points.txt file"/>
        <cvalue name="FILENAME_CENTROMERES" value='${baseDirectoryReference}/stats/hg19_gaps.txt' type="string"/>

        <!--getSegmentsAndSnps/pscbsAll Opts-->
        <cvalue name='min_seg_width' value='2000' type="integer" description="segmentByPairedPSCBS() minwidth parameter in PSCBS R package"/>
        <cvalue name='undo_SD' value='24' type="integer" description="segmentByPairedPSCBS() undo.SD parameter in PSCBS R package"/>
        <cvalue name='pscbs_prune_height' value='0' type="integer" description="pruneByHClust() parameter h in PSCBS R package"/>

        <!--markSegsWithHomozygDel Opts-->
        <cvalue name='min_segment_map' value='0.6' type="float" description="minimum average mappability over segment to be kept after segmentation"/>

        <!--clusterAndPruneSegments Opts-->
        <cvalue name='min_seg_length_prune' value='9000' type="integer"
                description="maximum of segment to be considered for merging to neighbouring segment prior to clustering"/>
        <cvalue name='min_num_SNPs' value='15' type="integer"
                description="maximum number of SNPs in segment to be considered for merging to neighbouring segment prior to clustering"/>
        <cvalue name='clustering' value='yes' type="string"
                description="should segments be clustered (yes|no), coerage and BAF will be estimated and assigned clusterwide"/>
        <cvalue name='min_cluster_number' value='1' type="integer"
                description="minimum number of clusters to be tried with BIC"/>
        <cvalue name='min_membership' value='0.8' type="float" description="obsolete"/>
        <cvalue name='min_distance' value='0.05' type="float" description="min_distance"/>
        <cvalue name='haplogroupFilePrefix' value='haploblocks_chr' type="string" description="prefix for file with haplogroups per chromosome"/>
        <cvalue name='haplogroupFileSuffix' value='txt' type="string" description="suffix for file with haplogroups per chromosome"/>
        <cvalue name='haplogroupFilePath' value='${phasingOutputDirectory}/${haplogroupFilePrefix}' type="path"/>

        <!--estimatePurityPloidy Opts-->
        <cvalue name='minLim' value='0.47' type="float"
                description="obsolete"/>
        <cvalue name='maxLim' value='0.53' type="float"
                description="obsolete"/>

        <!--estimatePurityPloidy Opts-->
        <cvalue name='min_length_purity' value='1000000' type="integer" description="minimum length of segments to be considered for tumor cell content and ploidy estimation"/>
        <cvalue name='min_hetSNPs_purity' value='500' type="integer"
                description="minimum number of control heterozygous SNPs in segments to be considered for tumor cell content and ploidy estimation"/>
        <cvalue name='dh_stop' value='max' type="string"/>
        <cvalue name='min_length_dh_stop' value='1000000' type="integer"/>
        <cvalue name='dh_zero' value='no' type="string"/>
        <cvalue name='purity_min' value='0.3' type="float" description="minimum tumor cell content allowed"/>
        <cvalue name='purity_max' value='1.0' type="float" description="i"/>
        <cvalue name='ploidy_min' value='1.0' type="float"/>
        <cvalue name='ploidy_max' value="6.5" type="float"/>
        <cvalue name='local_minium_upper_boundary_shift' value="0.1" type="float"
                description="only solutions with local minimum less than min(sel_local_minima) + local_minium_upper_boundary_shift will be considered"/>

        <!--generatePlots opts-->
        <cvalue name='PLOT_PRE' value="${aceseqOutputDirectory}/${pid}_plot" type="path"/>
        <cvalue name='ymaxcov_threshold' value="8.0" type="float"
                description="Maximum copy number to be shown in plots. Segments with higher TCN will be represented with triangles at the upper border of the plot."/>

        <!--generateVCF opts-->
        <cvalue name="blacklistFileName" value='artifact.homoDels.potentialArtifacts.txt' type="string"/>
        <cvalue name="cytobandsFile" value='/icgc/ngs_share/annovar/annovar_common_humandb/hg19_cytoBand.txt' type="string"/>
        <cvalue name='FILE_MOST_IMPORTANT_INFO_SEG_PRE' value="${pid}_most_important_info" type="string"/>
        <cvalue name='FILE_MOST_IMPORTANT_INFO_SEG_POST' value=".txt" type="string"/>
        <cvalue name='FILE_SEGMENT_VCF_PRE' value="${aceseqOutputDirectory}/${pid}" type="path"/>
        <cvalue name='FILE_SEGMENT_VCF_POST' value=".cnv.vcf" type="string"/>

    </configurationvalues>
    <processingTools>
        <!-- Environment Setup Scripts -->
        <!-- Workflow environment. The tool name for the complete workflow environment is "workflowEnvironment_${environmentTool}" or
             "workflow_environment_${environmentTool}". -->
        <tool name="workflowEnvironment_condaTbiPbs" value="conda_tbi-pbs-cluster.sh" basepath="copyNumberEstimationWorkflow/environments"/>
        <tool name="workflowEnvironment_conda" value="conda.sh" basepath="copyNumberEstimationWorkflow/environments"/>
        <tool name="workflowEnvironment_tbiCluster" value="tbi-cluster.sh" basepath="copyNumberEstimationWorkflow/environments"/>

        <!-- Cluster-job specific environments.
             Tool-specific environments override the global workflows environment. You can reference the tool name
             (1) prefixed with TOOL_, (2) with all capitals prefixed by an underscore '-', (3) in all capitals.
             The 'correctGcBiasEnvironment_conda' therefore becomes TOOL_CORRECT_GC_BIAS_ENVIRONMENT_CONDA. -->
        <!--<tool name="correctGcBiasEnvironment_conda" value="correctGCBias_conda.sh" basepath="copyNumberEstimationWorkflow/environments"/>-->

        <!-- cnvSnpGeneration = TOOL_SNP_CNV_GENERATION -->
        <tool name="bashLib" value="bashLib.sh" basepath="copyNumberEstimationWorkflow"/>
        <tool name="snpPosCnvWinGenerator" value="snp_cnv.py" basepath="copyNumberEstimationWorkflow"/>
        <tool name="mergeFilterSnp" value="merge_and_filter_snp.py" basepath="copyNumberEstimationWorkflow"/>
        <tool name="annotateCnvVcf" value="annotate_vcf.pl" basepath="copyNumberEstimationWorkflow"/>
        <tool name="addMappability" value="addMappability.py" basepath="copyNumberEstimationWorkflow"/>
        <tool name="fakeControl" value="replaceControlACEseq.R" basepath="copyNumberEstimationWorkflow"/>
        <tool name="estimateSex" value="getSex.R" basepath="copyNumberEstimationWorkflow"/>
        <tool name="mergeFilterCnv" value="merge_and_filter_cnv.py" basepath="copyNumberEstimationWorkflow"/>
        <tool name="getHetSnps" value="getHetSNPs.R" basepath="copyNumberEstimationWorkflow"/>

        <tool name="beagle" value="beagle.25Nov19.28d.jar" basepath="copyNumberEstimationWorkflow"/>
        <tool name="beagleCreateFakeSamples" value="beagle_create_fake_samples.py" basepath="copyNumberEstimationWorkflow"/>
        <tool name="beagleEmbedHaplotypesVcf" value="beagle_embed_haplotypes_vcf.py" basepath="copyNumberEstimationWorkflow"/>

        <tool name="embedHaplotypesVcf" value="embed_haplotypes_vcf.py" basepath="copyNumberEstimationWorkflow"/>
        <tool name="extractGenotypeVcf" value="extract_genotype_vcf.py" basepath="copyNumberEstimationWorkflow"/>
        <tool name="groupHaplotypes" value="group_genotypes.py" basepath="copyNumberEstimationWorkflow"/>
        <tool name="estimateSex" value="getSex.R" basepath="copyNumberEstimationWorkflow"/>
        <tool name="addHaplotype" value="add_haplotypes.py" basepath="copyNumberEstimationWorkflow"/>
        <tool name="createBafPlots" value="createBAFplots.R" basepath="copyNumberEstimationWorkflow"/>
        <tool name="correctGcBiasR" value="correctGCBias.R" basepath="copyNumberEstimationWorkflow"/>
        <tool name="convertToJson" value="convertTabToJson.py" basepath="copyNumberEstimationWorkflow"/>
        <tool name="defineBreakpoints" value="datatable_and_PSCBSgaps.R" basepath="copyNumberEstimationWorkflow"/>
        <tool name="addSvToPscbsGaps" value="PSCBSgabs_plus_sv_points.py" basepath="copyNumberEstimationWorkflow"/>
        <tool name="addCrestToPscbsGaps" value="PSCBSgabs_plus_CRESTpoints.py" basepath="copyNumberEstimationWorkflow"/>
        <tool name="pscbsSegmentation" value="pscbs_all.R" basepath="copyNumberEstimationWorkflow"/>
        <tool name="addHomozygousDeletion" value="homozygous_deletion.pl" basepath="copyNumberEstimationWorkflow"/>
        <tool name="addSegmentsToSnpData" value="segments_to_data.py" basepath="copyNumberEstimationWorkflow"/>
        <tool name="clusterFunctions" value="cluster_functions.R" basepath="copyNumberEstimationWorkflow"/>
        <tool name="manualPruningSegments" value="manual_pruning.R" basepath="copyNumberEstimationWorkflow"/>
        <tool name="adjustAlleleAssignment" value="adjustAlleleFreqs.R" basepath="copyNumberEstimationWorkflow"/>
        <tool name="estimatePeaks" value="purity_ploidy.R" basepath="copyNumberEstimationWorkflow"/>
        <tool name="parseVcf" value="parseVcf.pl" basepath="copyNumberEstimationWorkflow"/>
        <tool name="parseJson" value="parseJson.py" basepath="copyNumberEstimationWorkflow"/>
        <tool name="removeBreakpoints" value="removeBreakpoints.py" basepath="copyNumberEstimationWorkflow"/>
        <tool name="mergeArtifacts" value="mergeArtifacts.py" basepath="copyNumberEstimationWorkflow"/>
        <tool name="smoothData" value="smoothData.py" basepath="copyNumberEstimationWorkflow"/>
        <tool name="hrdEstimation" value="HRD_estimation.R" basepath="copyNumberEstimationWorkflow"/>

        <tool name="estimatePurityPloidy" value="purity_ploidy_estimation_final.R" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="2" cores="2" nodes="1" walltime="5"/>
            </resourcesets>
        </tool>

        <tool name="generatePlots" value="pscbs_plots.R" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="50" cores="1" nodes="1" walltime="12"/>
            </resourcesets>
        </tool>
        <tool name="plotFunctions" value="pscbs_plots_functions.R" basepath="copyNumberEstimationWorkflow"/>
        <tool name="getFinalPurityPloidy" value="getFinalPurityPloidy.py" basepath="copyNumberEstimationWorkflow"/>

        <tool name="cnvSnpGeneration" value="cnv_snvMpileup.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="10" cores="2" nodes="1" walltime="15"/>
            </resourcesets>
            <input type="file" typeof="BamFile" scriptparameter="FILE_TUMOR_BAM"/>
            <input type="file" typeof="BamFile" scriptparameter="FILE_CONTROL_BAM"/>
            <input type="string" setby="callingCode" scriptparameter="PARM_CHR_INDEX"/>
            <output type="filegroup" typeof="CnvSnpGeneratorResultFileGroup">
                <output type="file" typeof="SNPPositionFile" scriptparameter="FILENAME_SNP_POS"/>
                <output type="file" typeof="CoverageWindowsFile" scriptparameter="FILENAME_COV_WIN"/>
            </output>
        </tool>

        <tool name="cnvSnpGeneration_withoutControl" value="cnv_snvMpileup.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="2" cores="2" nodes="1" walltime="15"/>
            </resourcesets>
            <input type="file" typeof="BamFile" scriptparameter="FILE_TUMOR_BAM"/>
            <input type="string" setby="callingCode" scriptparameter="PARM_CHR_INDEX"/>
            <output type="filegroup" typeof="CnvSnpGeneratorResultFileGroup">
                <output type="file" typeof="SNPPositionFile" scriptparameter="FILENAME_SNP_POS"/>
                <output type="file" typeof="CoverageWindowsFile" scriptparameter="FILENAME_COV_WIN"/>
            </output>
        </tool>

        <tool name="annotateCnvFiles" value="vcfAnno.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="0.2" cores="2" nodes="1" walltime="4"/>
            </resourcesets>
            <input type="file" typeof="CoverageWindowsFile" scriptparameter="IGNORETHIS"/>
            <input type="filegroup" typeof="GenericFileGroup" scriptparameter="COV_WIN_FILES" passas="array"/>
            <output type="tuple">
                <output type="file" typeof="GenderFile" selectiontag="genderFile" scriptparameter="FILENAME_SEX"/>
                <output type="filegroup" typeof="GenericFileGroup" fileclass="TextFile" selectiontag="annotatedCoverage" scriptparameter="OUTFILES"/>
            </output>
        </tool>

        <tool name="replaceBadControl" value="replaceControl.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="0.2" cores="2" nodes="1" walltime="5"/>
            </resourcesets>
            <input type="file" typeof="GenderFile" scriptparameter="FILENAME_SEX"/>
            <output type="file" typeof="TextFile" scriptparameter="FILENAME_CHECKPOINT_FAKECONTROL"/>
        </tool>

        <tool name="mergeAndFilterCnvFiles" value="cnvMergeFilter.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="0.2" cores="2" nodes="1" walltime="5"/>
            </resourcesets>
            <input type="file" typeof="TextFile" scriptparameter="IGNORETHIS"/>
            <input type="filegroup" typeof="de.dkfz.roddy.knowledge.files.GenericFileGroup" scriptparameter="COV_WIN_FILES" passas="array"/>
            <output type="file" typeof="TextFile" scriptparameter="FILENAME_COV_WINDOWS_WG"/>
        </tool>

        <tool name="mergeAndFilterCnvFiles_withReplaceBadControl" value="cnvMergeFilter.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="0.2" cores="2" nodes="1" walltime="5"/>
            </resourcesets>
            <input type="file" typeof="TextFile" scriptparameter="FILENAME_CHECKPOINT_FAKE_CONTROL"/>
            <input type="filegroup" typeof="de.dkfz.roddy.knowledge.files.GenericFileGroup" scriptparameter="COV_WIN_FILES" passas="array"/>
            <output type="file" typeof="TextFile" selectiontag="covWinFileWithBadControl" scriptparameter="FILENAME_COV_WINDOWS_WG"/>
        </tool>

        <tool name="mergeAndFilterSnpFiles" value="snvMergeFilter.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="0.2" cores="2" nodes="1" walltime="5"/>
            </resourcesets>
            <input type="file" typeof="BamFile" scriptparameter="FILE_TUMOR_BAM"/>
            <input type="filegroup" typeof="SNPPositionFileGroupByChromosome" scriptparameter="SNP_POS_FILES" passas="array"/>
            <output type="file" typeof="TextFile" scriptparameter="FILENAME_SNP_POSITIONS_WG"/>
        </tool>

        <tool name="getGenotypes" value="estimateGenotypes.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="2" cores="1" nodes="1" walltime="3"/>
            </resourcesets>
            <input type="file" typeof="TextFile" scriptparameter="FILENAME_SNP_POSITIONS_WG"/>
            <output type="file" typeof="TextFile" scriptparameter="FILENAME_SNP_POSITIONS_WG_FAKE"/>
        </tool>

        <tool name="createUnphasedGenotype" value="createUnphasedFiles.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="0.2" cores="1" nodes="1" walltime="5"/>
            </resourcesets>
            <input type="file" typeof="TextFile" scriptparameter="FILENAME_SNP_POSITIONS_WG_FAKE"/>
            <output type="filegroup" typeof="UnphasedGenotypeFileGroupByChromosome" fileclass="UnphasedGenotypeFile" scriptparameter="FILENAME_UNPHASED_GENOTYPE" passas="array"/>
        </tool>

        <tool name="phaseGenotypes_noMpileup" value="phasing.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="10" cores="3" nodes="1" walltime="10"/>
            </resourcesets>
            <input type="file" typeof="UnphasedGenotypeFile" scriptparameter="FILENAME_UNPHASED_GENOTYPE"/>
            <output type="tuple">
                <output type="file" selectiontag="withChromosomeIndex" typeof="PhasedGenotypeFile" scriptparameter="FILENAME_PHASED_GENOTYPES"/>
                <output type="file" selectiontag="withChromosomeIndex" typeof="HaploblockGroupFile" scriptparameter="FILENAME_HAPLOBLOCK_GROUPS"/>
            </output>
        </tool>

        <tool name="phaseGenotypes_X_noMpileup" value="phasing_X.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="10" cores="3" nodes="1" walltime="10"/>
            </resourcesets>
            <input type="file" typeof="UnphasedGenotypeFile" scriptparameter="FILENAME_UNPHASED_GENOTYPE"/>
            <input type="file" typeof="GenderFile" scriptparameter="FILENAME_SEX"/>
            <output type="tuple">
                <output type="file" selectiontag="forChromosomeX" typeof="PhasedGenotypeFile" scriptparameter="FILENAME_PHASED_GENOTYPES"/>
                <output type="file" selectiontag="forChromosomeX" typeof="HaploblockGroupFile" scriptparameter="FILENAME_HAPLOBLOCK_GROUPS"/>
            </output>
        </tool>

        <tool name="phaseGenotypes" value="phasing.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="10" cores="1" nodes="1" walltime="10"/>
            </resourcesets>
            <input type="file" typeof="BamFile" scriptparameter="FILE_CONTROL_BAM"/>
            <output type="tuple">
                <output type="file" selectiontag="withChromosomeIndex" typeof="PhasedGenotypeFile" scriptparameter="FILENAME_PHASED_GENOTYPES"/>
                <output type="file" selectiontag="withChromosomeIndex" typeof="HaploblockGroupFile" scriptparameter="FILENAME_HAPLOBLOCK_GROUPS"/>
            </output>
        </tool>

        <tool name="phaseGenotypes_X" value="phasing_X.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="10" cores="1" nodes="1" walltime="10"/>
            </resourcesets>
            <input type="file" typeof="BamFile" scriptparameter="FILE_CONTROL_BAM"/>
            <input type="file" typeof="GenderFile" scriptparameter="FILENAME_SEX"/>
            <output type="tuple">
                <output type="file" selectiontag="forChromosomeX" typeof="PhasedGenotypeFile" scriptparameter="FILENAME_PHASED_GENOTYPES"/>
                <output type="file" selectiontag="forChromosomeX" typeof="HaploblockGroupFile" scriptparameter="FILENAME_HAPLOBLOCK_GROUPS"/>
            </output>
        </tool>


        <tool name="addHaplotypesToSnpFile" value="haplotypes.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="0.2" cores="2" nodes="1" walltime="10"/>
            </resourcesets>
            <input type="file" typeof="TextFile" scriptparameter="FILENAME_SNP_POSITIONS_WG"/>
            <input type="filegroup" typeof="PhasedGenotypeFileGroupByChromosome" scriptparameter="PHASED_GENOTYPE_FILES" passas="array"/>
            <input type="file" typeof="PhasedGenotypeFile" scriptparameter="PHASED_GENOTYPE_X_FILE"/>
            <output type="file" typeof="TextFile" scriptparameter="FILENAME_SNP_POSITIONS_HAPLO_WG"/>
        </tool>

        <tool name="createControlBafPlots" value="createControlBafPlots.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="5" walltime="1"/>
            </resourcesets>
            <input type="file" typeof="TextFile" scriptparameter="FILENAME_SNP_POSITIONS_HAPLO_WG"/>
            <input type="file" typeof="GenderFile" scriptparameter="FILENAME_SEX"/>
            <output type="file" typeof="TextFile" scriptparameter="FILENAME_BAF_PLOT_CHECKPOINT"/>
        </tool>

        <tool name="correctGcBias" value="correct_gc_bias.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="2" walltime="1"/>
            </resourcesets>
            <input type="file" typeof="TextFile" scriptparameter="FILENAME_COV_WINDOWS_WG"/>
            <output type="tuple">
                <output type="file" selectiontag="correctedWindows" typeof="TextFile" scriptparameter="FILENAME_GC_CORRECTED_WINDOWS"/>
                <output type="file" selectiontag="tab" typeof="TextFile" scriptparameter="FILENAME_GC_CORRECTED_QUALITY"/>
                <output type="file" selectiontag="tabSlim" typeof="TextFile" scriptparameter="FILENAME_QC_GC_CORRECTION_JSON"/>
            </output>

        </tool>

        <tool name="getBreakpoints" value="datatablePSCBSgaps.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="50" walltime="5"/>
            </resourcesets>
            <input type="file" typeof="TextFile" scriptparameter="FILENAME_SNP_POSITIONS_HAPLO_WG"/>
            <input type="file" typeof="TextFile" scriptparameter="FILENAME_GC_CORRECTED_WINDOWS"/>
            <input type="file" typeof="GenderFile" scriptparameter="FILENAME_SEX"/>
            <output type="tuple">
                <output type="file" selectiontag="knownsegments" typeof="TextFile" scriptparameter="FILENAME_KNOWNSEGMENTS"/>
                <output type="file" selectiontag="snpPositions" typeof="TextFile" scriptparameter="FILE_PSCBS_DATA"/>
                <!--<output type="file" selectiontag="knowncentromereregions" typeof="TextFile" scriptparameter="FILENAME_KNOWNCENTROMEREREGIONS"/>-->
            </output>
        </tool>

        <tool name="mergeBreakpointsAndSv" value="PSCBSgaps_SV.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="0.2" cores="2" nodes="1" walltime="1"/>
            </resourcesets>
            <input type="file" typeof="TextFile" scriptparameter="FILENAME_KNOWNSEGMENTS"/>
            <input type="file" typeof="SVFile" scriptparameter="FILENAME_SV"/>
            <output type="tuple">
                <output type="file" selectiontag="breakpointsSvs" typeof="BreakpointsFile" scriptparameter="FILENAME_BREAKPOINTS"/>
                <output type="file" selectiontag="svPoints" typeof="TextFile" scriptparameter="FILENAME_SV_POINTS"/>
            </output>
        </tool>

        <tool name="mergeBreakpointsWithoutSv" value="PSCBSgaps_SV.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="0.2" cores="2" nodes="1" walltime="1"/>
            </resourcesets>
            <input type="file" typeof="TextFile" scriptparameter="FILENAME_KNOWNSEGMENTS"/>
            <output type="tuple">
                <output type="file" selectiontag="breakpointsSvs" typeof="BreakpointsFile" scriptparameter="FILENAME_BREAKPOINTS"/>
                <output type="file" selectiontag="svPoints" typeof="TextFile" scriptparameter="FILENAME_SV_POINTS"/>
            </output>
        </tool>

        <tool name="mergeBreakpointsAndSvCrest" value="mergePSCBSCrest.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="0.2" cores="2" nodes="1" walltime="1"/>
            </resourcesets>
            <input type="file" typeof="TextFile" scriptparameter="FILENAME_KNOWNSEGMENTS"/>
            <input type="file" typeof="TextFile" scriptparameter="FILENAME_CREST_DELDUPINV"/>
            <input type="file" typeof="TextFile" scriptparameter="FILENAME_CREST_TRANSLOC"/>
            <output type="tuple">
                <output type="file" selectiontag="breakpointsSvs" typeof="BreakpointsFile" scriptparameter="FILENAME_BREAKPOINTS"/>
                <output type="file" selectiontag="svPoints" typeof="TextFile" scriptparameter="FILENAME_SV_POINTS"/>
            </output>
        </tool>

        <tool name="getSegmentsAndSnps" value="PSCBSall.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="50" cores="2" nodes="1" walltime="20"/>
            </resourcesets>
            <input type="file" typeof="BreakpointsFile" scriptparameter="FILENAME_BREAKPOINTS"/>
            <input type="file" typeof="TextFile" scriptparameter="FILE_PSCBS_DATA"/>
            <output type="file" selectiontag="segments" typeof="TextFile" scriptparameter="FILENAME_SEGMENTS"/>
        </tool>

        <tool name="markHomozygousDeletions" value="homozygDel.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="5" cores="1" nodes="1" walltime="1"/>
            </resourcesets>
            <input type="file" typeof="TextFile" scriptparameter="FILENAME_SEGMENTS"/>
            <input type="file" typeof="TextFile" scriptparameter="FILENAME_SV_POINTS"/>
            <output type="file" typeof="TextFile" scriptparameter="FILENAME_SEGMENTS_W_HOMDEL"/>
        </tool>

        <tool name="segmentsToSnpDataHomodel" value="segmentsDataHomoDel.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="5" cores="2" nodes="1" walltime="2"/>
            </resourcesets>
            <input type="file" typeof="TextFile" scriptparameter="FILENAME_SEGMENTS_W_HOMDEL"/>
            <input type="file" typeof="TextFile" scriptparameter="FILE_PSCBS_DATA"/>
            <output type="file" typeof="TextFile" scriptparameter="FILENAME_ALL_SNP_UPDATE1"/>
        </tool>

        <tool name="clusterAndPruneSegments" value="clusteredPrunedNormal.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="50" cores="1" nodes="1" walltime="120"/>
            </resourcesets>
            <input type="file" typeof="TextFile" scriptparameter="FILENAME_SEGMENTS_W_HOMDEL"/>
            <input type="file" typeof="TextFile" scriptparameter="FILENAME_ALL_SNP_UPDATE1"/>
            <input type="file" typeof="GenderFile" scriptparameter="FILENAME_SEX"/>
            <input type="file" typeof="TextFile" scriptparameter="FILENAME_GC_CORRECTED_QUALITY"/>
            <output type="tuple">
                <output type="file" selectiontag="segments" typeof="TextFile" scriptparameter="FILENAME_CLUSTERED_SEGMENTS"/>
                <output type="file" selectiontag="snps" typeof="TextFile" scriptparameter="FILENAME_ALL_SNP_UPDATE2"/>
            </output>
        </tool>

        <tool name="segmentsToSnpDataPruned" value="segmentsPrunedNormal.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="5" cores="2" nodes="1" walltime="2"/>
            </resourcesets>
            <input type="file" typeof="TextFile" scriptparameter="FILENAME_CLUSTERED_SEGMENTS"/>
            <input type="file" typeof="TextFile" scriptparameter="FILENAME_ALL_SNP_UPDATE2"/>
            <output type="file" typeof="TextFile" scriptparameter="FILENAME_ALL_SNP_UPDATE3"/>
        </tool>

        <tool name="estimatePeaksForPurity" value="purityPloidity.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="15" cores="1" nodes="1" walltime="10"/>
            </resourcesets>
            <input type="file" typeof="TextFile" scriptparameter="FILENAME_CLUSTERED_SEGMENTS"/>
            <input type="file" typeof="TextFile" scriptparameter="FILENAME_ALL_SNP_UPDATE3"/>
            <input type="file" typeof="GenderFile" scriptparameter="FILENAME_SEX"/>
            <output type="file" typeof="TextFile" scriptparameter="FILENAME_SEGMENTS_W_PEAKS"/>
        </tool>

        <tool name="estimatePurityAndPloidy" value="purityPloidity_EstimateFinal.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="7" cores="1" nodes="1" walltime="5"/>
            </resourcesets>
            <input type="file" typeof="TextFile" scriptparameter="FILENAME_SEGMENTS_W_PEAKS"/>
            <input type="file" typeof="GenderFile" scriptparameter="FILENAME_SEX"/>
            <output type="file" typeof="TextFile" scriptparameter="FILENAME_PURITY_PLOIDY"/>
        </tool>

        <tool name="generateResultsAndPlots" value="plots.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="60" cores="1" nodes="1" walltime="15"/>
            </resourcesets>
            <input type="file" typeof="TextFile" scriptparameter="FILENAME_SEGMENTS_W_PEAKS"/>
            <input type="file" typeof="TextFile" scriptparameter="FILENAME_ALL_SNP_UPDATE3"/>
            <input type="file" typeof="TextFile" scriptparameter="FILENAME_SV_POINTS"/>
            <input type="file" typeof="TextFile" scriptparameter="FILENAME_PURITY_PLOIDY"/>
            <input type="file" typeof="GenderFile" scriptparameter="FILENAME_SEX"/>
            <output type="tuple">
                <output type="file" selectiontag="checkpoint" typeof="TextFile" scriptparameter="FILENAME_CHECKPOINT_PLOTS"/>
                <output type="file" selectiontag="json" typeof="TextFile" scriptparameter="FILENAME_PARAMETER_JSON"/>
            </output>
        </tool>

        <!--<tool name="generateVcfFromTab" value="convertTabTovcf.sh" basepath="copyNumberEstimationWorkflow">-->
            <!--<resourcesets>-->
                <!--<rset size="l" memory="1" cores="1" nodes="1" walltime="2"/>-->
            <!--</resourcesets>-->
            <!--<input type="file" typeof="TextFile" scriptparameter="FILENAME_PURITY_PLOIDY"/>-->
            <!--<input type="file" typeof="TextFile" scriptparameter="FILENAME_CHECKPOINT_PLOTS"/>-->
            <!--<output type="file" typeof="TextFile" scriptparameter="FILENAME_CHECKPOINT_VCF"/>-->
        <!--</tool>-->

        <tool name="estimateHrdScore" value="estimateHRDScore.sh" basepath="copyNumberEstimationWorkflow">
            <resourcesets>
                <rset size="l" memory="1" cores="1" nodes="1" walltime="2"/>
            </resourcesets>
            <input type="file"  typeof="GenderFile" scriptparameter="FILENAME_SEX"/>
            <input type="file"  typeof="TextFile" scriptparameter="FILENAME_PARAMETER_JSON"/>
            <!--<input type="file"  typeof="TextFile" scriptparameter="FILENAME_KNOWNCENTROMEREREGIONS"/>-->
            <output type="file" typeof="TextFile" scriptparameter="FILENAME_CHECKPOINT_HRD"/>
        </tool>

    </processingTools>
    <filenames package='de.dkfz.b080.co.files' filestagesbase='COFileStage'>
        <filename class='SNPPositionFile' derivedFrom="BamFile" pattern='${cnvSnpOutputDirectory}/${pid}.chr${PARM_CHR_INDEX}.${SNP_SUFFIX}'/>
        <!--<filename class='SNPPositionFile' derivedFrom="BamFile" pattern='${outputAnalysisBaseDirectory}/${aceseqOutputDirectory}/${cnvSnpOutputDirectory}/${pid}.chr${jobParameter,name="PARM_CHR_INDEX"}.snp.tab.gz' />-->
        <filename class='CoverageWindowsFile' derivedFrom="BamFile" pattern='${cnvSnpOutputDirectory}/${pid}.chr${PARM_CHR_INDEX}.${CNV_SUFFIX}'/>
<!--      <filename class="PhasedGenotypeFile" onScriptParameter="FILENAME_PHASED_GENOTYPES" selectiontag="withChromosomeIndex"
                  pattern='${phasingOutputDirectory}/${cvalue,name="phasedGenotypesPrefix",default="phased_chr"}${jobParameter,name="PARM_CHR_INDEX"}.${cvalue,name="phasedGenotypesSuffix",default="vcf"}'/>
        <filename class="HaploblockGroupFile" onTool="phaseGenotypes_noMpileup" selectiontag="withChromosomeIndex"
                  pattern='${phasingOutputDirectory}/${cvalue,name="haplogroupFilePrefix",default="haploblocks_chr"}${jobParameter,name="PARM_CHR_INDEX"}.${cvalue,name="FILE_TXT_SUFFIX",default="txt"}'/>
        <filename class="PhasedGenotypeFile" onTool="phaseGenotypes_X_noMpileup" selectiontag="forChromosomeX"
                  pattern='${phasingOutputDirectory}/${cvalue,name="phasedGenotypesPrefix",default="phased_chr"}23.${cvalue,name="phasedGenotypesSuffix",default="vcf"}'/>
        <filename class="HaploblockGroupFile" onTool="phaseGenotypes_X_noMpileup" selectiontag="forChromosomeX"
                  pattern='${phasingOutputDirectory}/${cvalue,name="haplogroupFilePrefix",default="haploblocks_chr"}23.${cvalue,name="FILE_TXT_SUFFIX",default="txt"}'/>

        <filename class="PhasedGenotypeFile" onTool="phaseGenotypes" selectiontag="withChromosomeIndex"
                  pattern='${phasingOutputDirectory}/${cvalue,name="phasedGenotypesPrefix",default="phased_chr"}${jobParameter,name="PARM_CHR_INDEX"}.${cvalue,name="phasedGenotypesSuffix",default="vcf"}'/>
        <filename class="HaploblockGroupFile" onTool="phaseGenotypes" selectiontag="withChromosomeIndex"
                  pattern='${phasingOutputDirectory}/${cvalue,name="haplogroupFilePrefix",default="haploblocks_chr"}${jobParameter,name="PARM_CHR_INDEX"}.${cvalue,name="FILE_TXT_SUFFIX",default="txt"}'/>
        <filename class="PhasedGenotypeFile" onTool="phaseGenotypes_X" selectiontag="forChromosomeX"
                  pattern='${phasingOutputDirectory}/${cvalue,name="phasedGenotypesPrefix",default="phased_chr"}23.${cvalue,name="phasedGenotypesSuffix",default="vcf"}'/>
        <filename class="HaploblockGroupFile" onTool="phaseGenotypes_X" selectiontag="forChromosomeX"
                  pattern='${phasingOutputDirectory}/${cvalue,name="haplogroupFilePrefix",default="haploblocks_chr"}23.${cvalue,name="FILE_TXT_SUFFIX",default="txt"}'/>
-->
        <filename class="TextFile" onMethod="SNPPositionFileGroupByChromosome.mergeAndFilter" pattern='${aceseqOutputDirectory}/${pid}_all.snp.tab.gz'/>
        <filename class="TextFile" onMethod="ACESeqMethods.getGenotypes" pattern='${aceseqOutputDirectory}/${pid}_all.snp.fakeBAF.tab.gz'/>

        <filename class="PhasedGenotypeFile" onTool="phaseGenotypes_noMpileup" selectiontag="withChromosomeIndex"
              pattern='${phasingOutputDirectory}/${cvalue,name="phasedGenotypesPrefix",default="phased_chr"}${jobParameter,name="PARM_CHR_INDEX"}.${cvalue,name="phasedGenotypesSuffix",default="vcf"}'/>
        <filename class="HaploblockGroupFile" onTool="phaseGenotypes_noMpileup" selectiontag="withChromosomeIndex"
              pattern='${phasingOutputDirectory}/${cvalue,name="haplogroupFilePrefix",default="haploblocks_chr"}${jobParameter,name="PARM_CHR_INDEX"}.${cvalue,name="FILE_TXT_SUFFIX",default="txt"}'/>
        <filename class="PhasedGenotypeFile" onTool="phaseGenotypes_X_noMpileup" selectiontag="forChromosomeX"
              pattern='${phasingOutputDirectory}/${cvalue,name="phasedGenotypesPrefix",default="phased_chr"}23.${cvalue,name="phasedGenotypesSuffix",default="vcf"}'/>
        <filename class="HaploblockGroupFile" onTool="phaseGenotypes_X_noMpileup" selectiontag="forChromosomeX"
              pattern='${phasingOutputDirectory}/${cvalue,name="haplogroupFilePrefix",default="haploblocks_chr"}23.${cvalue,name="FILE_TXT_SUFFIX",default="txt"}'/>

        <filename class="PhasedGenotypeFile" onTool="phaseGenotypes" selectiontag="withChromosomeIndex"
              pattern='${phasingOutputDirectory}/${cvalue,name="phasedGenotypesPrefix",default="phased_chr"}${jobParameter,name="PARM_CHR_INDEX"}.${cvalue,name="phasedGenotypesSuffix",default="vcf"}'/>
        <filename class="HaploblockGroupFile" onTool="phaseGenotypes" selectiontag="withChromosomeIndex"
              pattern='${phasingOutputDirectory}/${cvalue,name="haplogroupFilePrefix",default="haploblocks_chr"}${jobParameter,name="PARM_CHR_INDEX"}.${cvalue,name="FILE_TXT_SUFFIX",default="txt"}'/>
        <filename class="PhasedGenotypeFile" onTool="phaseGenotypes_X" selectiontag="forChromosomeX"
              pattern='${phasingOutputDirectory}/${cvalue,name="phasedGenotypesPrefix",default="phased_chr"}23.${cvalue,name="phasedGenotypesSuffix",default="vcf"}'/>
        <filename class="HaploblockGroupFile" onTool="phaseGenotypes_X" selectiontag="forChromosomeX"
              pattern='${phasingOutputDirectory}/${cvalue,name="haplogroupFilePrefix",default="haploblocks_chr"}23.${cvalue,name="FILE_TXT_SUFFIX",default="txt"}'/>


        <filename class="UnphasedGenotypeFile" derivedFrom="TextFile"
                  pattern='${phasingOutputDirectory}/${cvalue, name="unphasedGenotypesPrefix", default="unphased_chr"}${fgindex}.${cvalue,name="unphasedGenotypesSuffix",default="vcf"}'/>
        <!--
                <filename class="TextFile" derivedFrom="TextFile" selectiontag="unphasedGenotypeChrXFile"
                          pattern='${phasingOutputDirectory}/${cvalue, name="unphasedGenotypesPrefix", default="unphased_chr"}X.${cvalue,name="unphasedGenotypesSuffix",default="vcf"}'/>
        -->
        <filename class="TextFile" onMethod="ACESeqMethods.addHaploTypes" pattern='${aceseqOutputDirectory}/${pid}_all.snp.haplo.tab.gz'/>
        <filename class="TextFile" onMethod="ACESeqMethods.createControlBafPlot" pattern='${plotOutputDirectory}/checkpointBaf.txt'/>
        <filename class="TextFile" onMethod="CoverageWindowsFileGroupByChromosome.annotate" selectiontag="annotatedCoverage" pattern='${cnvSnpOutputDirectory}/${pid}.chr${fgindex}.${CNV_ANNO_SUFFIX}'/>
        <filename class="GenderFile" onMethod="CoverageWindowsFileGroupByChromosome.annotate" selectiontag="genderFile" pattern='${aceseqOutputDirectory}/${pid}_sex.txt'/>
        <filename class="TextFile" onMethod="ACESeqMethods.replaceControl" pattern='${aceseqOutputDirectory}/checkpointFakeControl.txt'/>
        <filename class="TextFile" onMethod="CoverageWindowsFileAnnotationResult.mergeAndFilterCoverageWindowFiles" pattern='${aceseqOutputDirectory}/${pid}_all.cnv.tab.gz'/>
        <filename class="TextFile" derivedFrom='TextFile' selectiontag='covWinFileWithBadControl' pattern='${aceseqOutputDirectory}/${pid}_all.cnv.tab.gz'/>
        <filename class="TextFile" onMethod="ACESeqMethods.correctGC" selectiontag="correctedWindows" pattern='${aceseqOutputDirectory}/${pid}_all.cnv.corrected.tab.gz'/>
        <filename class="TextFile" onMethod="ACESeqMethods.correctGC" selectiontag="tabSlim" pattern='${plotOutputDirectory}/${pid}_qc_gc_corrected.json'/>
        <filename class="TextFile" onMethod="ACESeqMethods.correctGC" selectiontag="tab" pattern='${plotOutputDirectory}/${pid}_qc_gc_corrected.tsv'/>
        <filename class="TextFile" onMethod="ACESeqMethods.pscbsGaps" selectiontag="knownsegments" pattern='${aceseqOutputDirectory}/${pid}_knownsegments.txt'/>
        <!--<filename class="TextFile" onMethod="ACESeqMethods.pscbsGaps" selectiontag="knowncentromereregions" pattern='${aceseqOutputDirectory}/${pid}_knownCentromereRegions.txt'/>-->
        <filename class="TextFile" onMethod="ACESeqMethods.pscbsGaps" selectiontag="snpPositions" pattern='${aceseqOutputDirectory}/${pid}_pscbs_data.txt.gz'/>
        <filename class="TextFile" onMethod="ACESeqMethods.mergeCrest" selectiontag="crestDelDupInvFileTag" pattern='${crestOutputDirectory}/tumor_${pid}.${cvalue,name="crestDelDupInvSuffix",default="DELDUPINV"}'/>
        <filename class="TextFile" onMethod="ACESeqMethods.mergeCrest" selectiontag="crestTranslocFileTag" pattern='${crestOutputDirectory}/tumor_${pid}.${cvalue,name="crestTransSuffix",default="TX"}'/>

        <!--<filename class="TextFile" onMethod="ACESeqMethods.mergeCrest" selectiontag="breakpointsSvs" pattern='${aceseqOutputDirectory}/${pid}_breakpoints.txt'/>-->
        <!--<filename class="TextFile" onMethod="ACESeqMethods.mergeSv" selectiontag="breakpointsSvs" pattern='${aceseqOutputDirectory}/${pid}_breakpoints.txt'/>-->
        <!--<filename class="BreakpointsFile" onTool="mergeBreakpointsAndSv" selectiontag="breakpointsSvs" pattern='${aceseqOutputDirectory}/${pid}_breakpoints.txt'/>-->
        <!--<filename class="BreakpointsFile" onTool="mergeBreakpointsWithoutSv" selectiontag="breakpointsSvs" pattern='${aceseqOutputDirectory}/${pid}_breakpoints.txt'/>-->
        <!--<filename class="BreakpointsFile" onTool="mergeBreakpointsAndSvCrest" selectiontag="breakpointsSvs" pattern='${aceseqOutputDirectory}/${pid}_breakpoints.txt'/>-->



        <filename class="BreakpointsFile" onScriptParameter="FILENAME_BREAKPOINTS" selectiontag="breakpointsSvs" pattern='${aceseqOutputDirectory}/${pid}_breakpoints.txt'/>

        <filename class="TextFile" onScriptParameter="FILENAME_SV_POINTS" selectiontag="svPoints" pattern='${aceseqOutputDirectory}/${pid}_sv_points.txt'/>

        <filename class="TextFile" onMethod="ACESeqMethods.getSegmentAndGetSnps" selectiontag="segments" pattern='${aceseqOutputDirectory}/${pid}_fit.txt'/>
        <filename class="TextFile" onMethod="ACESeqMethods.markSegsWithHomozygDel" pattern='${aceseqOutputDirectory}/${pid}_homozygous_deletion.txt.gz'/>
        <filename class="TextFile" onMethod="ACESeqMethods.segsToSnpDataHomodel" pattern='${aceseqOutputDirectory}/${pid}_all_seg.txt.gz'/>
        <filename class="TextFile" onMethod="ACESeqMethods.clusterPruneSegments" selectiontag="snps" pattern='${aceseqOutputDirectory}/${pid}_all_seg_1.txt.gz'/>
        <filename class="TextFile" onMethod="ACESeqMethods.clusterPruneSegments" selectiontag="segments" pattern='${aceseqOutputDirectory}/${pid}_clustered_and_pruned_and_normal.txt'/>
        <filename class="TextFile" onMethod="ACESeqMethods.segsToSnpDataPruned" pattern='${aceseqOutputDirectory}/${pid}_all_seg_2.txt.gz'/>
        <filename class="TextFile" onMethod="ACESeqMethods.estimatePeaks" pattern='${aceseqOutputDirectory}/${pid}_combi_level.txt'/>
        <filename class="TextFile" onMethod="ACESeqMethods.estimatePurityPloidy" pattern='${aceseqOutputDirectory}/${pid}_ploidy_purity_2D.txt'/>
        <filename class="TextFile" onMethod="ACESeqMethods.generatePlots" selectiontag="checkpoint" pattern='${aceseqOutputDirectory}/checkpointPlots.txt'/>
        <filename class="TextFile" onMethod="ACESeqMethods.generatePlots" selectiontag="json" pattern='${aceseqOutputDirectory}/cnv_${pid}_parameter.json'/>
	    <filename class="TextFile" onMethod="ACESeqMethods.estimateHRD" pattern='${aceseqOutputDirectory}/checkpointHRD.txt'/>

        <!-- SV file used with the runSV flag. Always the same name, derives from any file type. -->
        <filename class="SVFile" derivedFrom="BasicBamFile" pattern='${svOutputDirectory}/svs_${pid}_filtered_somatic_minEventScore3.tsv'/>
        <filename class="SVFile" derivedFrom="BamFile" pattern='${svOutputDirectory}/svs_${pid}_filtered_somatic_minEventScore3.tsv'/>
    </filenames>

</configuration>
